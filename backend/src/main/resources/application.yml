server:
  port: ${PORT:8080}

internal:
  notify:
    token: ${INTERNAL_NOTIFY_TOKEN:}

promptline:
  env: ${PROMPTLINE_ENV:sandbox}
  s3:
    bucket: ${PROMPTLINE_CONFIG_BUCKET:promptline-config}
    uiKey: ${PROMPTLINE_UI_KEY:${promptline.env}/ui-config.json}
    policyKey: ${PROMPTLINE_POLICY_KEY:${promptline.env}/policy.json}

  mcp:
    base-url: ${PROMPTLINE_MCP_BASE_URL:}
    internal-token: ${MCP_INTERNAL_API_KEY:}
    
  llm:
    provider: ${PROMPTLINE_LLM_PROVIDER:noop}   # set to openrouter to enable
    openrouter:
      apiKey: ${OPENROUTER_API_KEY:}
      baseUrl: ${OPENROUTER_BASE_URL:https://openrouter.ai/api/v1}
      fastModel: ${PROMPTLINE_LLM_FAST_MODEL:meta-llama/llama-3.1-8b-instruct}
      strongModel: ${PROMPTLINE_LLM_STRONG_MODEL:meta-llama/llama-3.1-70b-instruct}
      appUrl: ${PROMPTLINE_APP_URL:http://localhost:8080}     # optional (OpenRouter visibility)
      appName: ${PROMPTLINE_APP_NAME:Promptline}              # optional (OpenRouter visibility)

spring:
  autoconfigure:
    exclude:
      - org.springframework.ai.autoconfigure.openai.OpenAiAutoConfiguration
      - org.springframework.ai.model.openai.autoconfigure.*
      - org.springframework.ai.model.openai.autoconfigure.OpenAiAudioSpeechAutoConfiguration
      - org.springframework.ai.model.openai.autoconfigure.OpenAiAudioTranscriptionAutoConfiguration
      - org.springframework.ai.model.openai.autoconfigure.OpenAiImageAutoConfiguration
      - org.springframework.ai.model.openai.autoconfigure.OpenAiEmbeddingAutoConfiguration
      - org.springframework.ai.model.openai.autoconfigure.OpenAiChatAutoConfiguration
      - org.springframework.ai.model.openai.autoconfigure.OpenAiModerationAutoConfiguration


  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/promptline}
    username: ${SPRING_DATASOURCE_USERNAME:promptline}
    password: ${SPRING_DATASOURCE_PASSWORD:promptline}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
    open-in-view: false
    properties:
      hibernate:
        format_sql: true

management:
  endpoints:
    web:
      exposure:
        include: health,info,mappings
